(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){},30:function(e,t,a){e.exports=a.p+"static/media/beeza.a4d45225.png"},33:function(e,t,a){e.exports=a(54)},42:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(17),c=a(1),r=a(2),s=a(5),l=a(3),u=a(4),m=a(7),d=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("h4",null,"Footer component")}}]),t}(n.Component),p=function e(){Object(c.a)(this,e)};p.setCookie=function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},p.getCookieValue=function(e){var t=e+"=",a=document.cookie.split(";"),n=!0,i=!1,o=void 0;try{for(var c,r=a[Symbol.iterator]();!(n=(c=r.next()).done);n=!0){for(var s=c.value;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.split("=")[1]}}catch(l){i=!0,o=l}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}return""};var h=a(20),g=a(30),f=a.n(g),v=(a(42),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={isLoggedIn:!1},a.showLogOutLinkDelegate={},a.showLogOutLink=function(e){a.setState({isLoggedIn:e})},a.logOut=function(){fetch("/account/logout",{method:"POST"}).then(function(e){return e.json()}).then(function(e){a.showLogOutLink(!1)}).catch(function(e){return console.error(e)})},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e;console.log("props ",this.props);var t="/account",a=p.getCookieValue("dollar");return(this.state.isLoggedIn||""!==a)&&(e=i.a.createElement(m.b,{className:"mainMenuItem",to:"/",onClick:this.logOut},"Logout"),t="/account/profile"),i.a.createElement("header",{className:"mainHeader"},i.a.createElement("div",{className:"mainHeaderLogoWrapper"},i.a.createElement(m.b,{className:"mainHeaderLogo",to:"/"},i.a.createElement("img",{className:"mainHeaderLogoImage",src:f.a,alt:"beeza"}))),i.a.createElement("div",{className:"mainMenu"},i.a.createElement(m.c,{exact:!0,activeClassName:"mainMenuItemActive",className:"mainMenuItem",to:"/"},"Home"),i.a.createElement(m.c,{exact:!0,activeClassName:"mainMenuItemActive",className:"mainMenuItem",to:"/shops"},"Shops"),i.a.createElement(m.c,{exact:!0,activeClassName:"mainMenuItemActive",className:"mainMenuItem",to:t},"Account"),e))}}]),t}(i.a.Component)),N=Object(h.b)(function(e){return{authState:e.authState.newState}},{login:function(e){return function(t){console.log("test"),t({type:"LOGIN",payload:e})}}})(v),E=a(15),b=a(19),O=function e(){Object(c.a)(this,e)};O.addEventListener=function(e,t){O.eRegister||(O.eRegister={},O.touchList={});var a=O.eRegister[e];a?a[a.length]=t:O.eRegister[e]=[t]},O.removeEventListener=function(e,t){if(O.eRegister){var a,n=O.eRegister[e];n&&(a=n.indexOf(t))>-1&&(n[a]=void 0,O.touchList[e]=!0)}},O.dispatch=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(O.eRegister){var a,n=O.eRegister[e];if(n)for(var i=0;i<n.length;i++){a=n[i];try{a&&a.call(a.scope,t)}catch(o){console.log("Events: ",o)}}}},O.eRegister={},O.touchList={};var j=function e(){Object(c.a)(this,e)};j.LOG_IN="LOG_IN";var y=function e(t,a){var n=arguments;return Object(c.a)(this,e),function(){t.apply(null,[n,a])}},L=(a(44),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={accountState:!1,activeLoginOption:!0,hideForms:!1,notificationMessage:"",showNotification:!1},a.fetchFormdata=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fetch(e,{body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(e){if("undefined"!==typeof e.loggedIn&&e.loggedIn||"undefined"!==typeof e.registered&&e.registered){var t=document.getElementById("loginForm"),n=document.getElementById("registerForm");return t.remove(),n.remove(),O.dispatch(j.LOG_IN,{data:e})}a.showNotificationPopup(e.msg)}).catch(function(e){return console.error(e)})},a.showNotificationPopup=function(e){a.setState({notificationMessage:e,showNotification:!0})},a.hideNotification=function(){a.state.showNotification&&a.setState({showNotification:!1})},a.formSubmitHandle=function(e){e.preventDefault();var t=e.target,n=new FormData(t),i={},o=!0,c=!1,r=void 0;try{for(var s,l=n.keys()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;i[u]=n.get(u)}}catch(m){c=!0,r=m}finally{try{o||null==l.return||l.return()}finally{if(c)throw r}}a.fetchFormdata(t.action,i)},a.validateUsername=function(e){0===e.target.value.length&&a.showNotificationPopup("Please enter username")},a.validateEmail=function(e){e.target.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,9})+$/)||a.showNotificationPopup("You have entered an invalid email address")},a.validatePassword=function(e){e.target.value.length<8&&a.showNotificationPopup("Password must be at least 8 characters")},a.toggleLoginRegister=function(e){var t="true"===e.target.dataset.activeOption;a.setState({activeLoginOption:t,showNotification:!1})},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:this.state.activeLoginOption?"loginRegisterBlock loginActive":"loginRegisterBlock registerActive"},n.createElement("h2",{className:"loginRegisterBlockTitle"},"Account Login/Register"),n.createElement("p",{className:"loginRegisterBlockCaption"},"Login or register new account here"),n.createElement("div",{className:"loginRegisterToggle"},n.createElement("span",{onClick:this.toggleLoginRegister,"data-active-option":"true",className:"loginRegisterToggleButton loginToggleButton"},"Login"),n.createElement("span",{onClick:this.toggleLoginRegister,"data-active-option":"false",className:"loginRegisterToggleButton registerToggleButton"},"Register")),n.createElement("div",{className:"loginRegisterForms"},n.createElement("div",{className:this.state.showNotification?"loginRegisterFormsNotification":"loginRegisterFormsNotification loginRegisterFormsNotificationHide"},n.createElement("div",{className:"loginRegisterFormsNotificationtextWrapper"},n.createElement("p",{className:"loginRegisterFormsNotificationText"},this.state.notificationMessage),n.createElement("span",{className:"loginRegisterFormsNotificationClose closeIC",onClick:this.hideNotification},"\xa0"))),n.createElement("form",{id:"loginForm",className:"loginRegisterForm loginForm",action:"/account/loginUser",onSubmit:this.formSubmitHandle},n.createElement("span",{className:"loginRegisterFormInputWrapper userIC"},n.createElement("input",{className:"loginRegisterFormInput",type:"text",placeholder:"Username",name:"username",onFocus:this.hideNotification,onBlur:this.validateUsername,required:!0})),n.createElement("span",{className:"loginRegisterFormInputWrapper passwordIC"},n.createElement("input",{className:"loginRegisterFormInput",type:"password",placeholder:"Password",name:"password",onFocus:this.hideNotification,onBlur:this.validatePassword,required:!0})),n.createElement("span",{className:"loginRegisterFormInputWrapper"},n.createElement("input",{className:"loginRegisterFormInput loginRegisterFormSubmit",type:"submit",value:"Login"}))),n.createElement("form",{id:"registerForm",className:"loginRegisterForm registerForm",action:"/account/registerUser",onSubmit:this.formSubmitHandle},n.createElement("span",{className:"loginRegisterFormInputWrapper userIC"},n.createElement("input",{className:"loginRegisterFormInput",type:"text",placeholder:"Username",name:"username",onFocus:this.hideNotification,onBlur:this.validateUsername,required:!0})),n.createElement("span",{className:"loginRegisterFormInputWrapper emailIC"},n.createElement("input",{className:"loginRegisterFormInput",type:"email",placeholder:"Email",name:"email",onFocus:this.hideNotification,onBlur:this.validateEmail,required:!0})),n.createElement("span",{className:"loginRegisterFormInputWrapper passwordIC"},n.createElement("input",{className:"loginRegisterFormInput passwordIC",type:"password",placeholder:"Password",name:"password",onFocus:this.hideNotification,onBlur:this.validatePassword,required:!0})),n.createElement("span",{className:"loginRegisterFormInputWrapper"},n.createElement("input",{className:"loginRegisterFormInput loginRegisterFormSubmit",type:"submit",value:"Register"})))))}}]),t}(n.Component)),w=(a(45),function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isLoggedIn:2,user:{}},a.showLogOutLinkDelegate={},a.requestUserData=function(){fetch("/account/getUser",{method:"GET"}).then(function(e){return e.json()}).then(function(e){"undefined"!==typeof e.loggedIn&&e.loggedIn?a.setState({isLoggedIn:1,user:e}):a.setState({isLoggedIn:2})}).catch(function(e){return console.error(e)})},a.loggedInStateUpdate=function(e){void 0!==typeof e&&e.length>0&&e[0].data.loggedIn&&a.setState({isLoggedIn:1})};var n=Object(b.a)(a);return a.showLogOutLinkDelegate=new y(n.loggedInStateUpdate,n),O.addEventListener(j.LOG_IN,n.showLogOutLinkDelegate),a.requestUserData(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=n.createElement(L,null);return 1===this.state.isLoggedIn&&(e=n.createElement(E.a,{to:"/account/profile"})),n.createElement(n.Fragment,null,e)}},{key:"componentWillUnmount",value:function(){O.removeEventListener(j.LOG_IN,this.showLogOutLinkDelegate)}}]),t}(n.Component)),I=(a(46),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"accountNavigation"},n.createElement(m.c,{exact:!0,className:"accountNavigation-Link",activeClassName:"accountNavigation-Link_Active",to:"/account/profile"},"My profile"),n.createElement(m.c,{exact:!0,className:"accountNavigation-Link",activeClassName:"accountNavigation-Link_Active",to:"/account/my-ads"},"My ads"),n.createElement(m.c,{exact:!0,className:"accountNavigation-Link",activeClassName:"accountNavigation-Link_Active",to:"/account/post-ad"},"Post ad"))}}]),t}(n.Component)),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props={adData:{_id:"",description:"",price:"",title:""}},a.deleteAd=function(){fetch("/ad/delete?id="+a.props.adData._id,{method:"POST"}).then(function(e){return e.json()}).then(function(e){a.setState({adsData:e.ads})}).catch(function(e){return console.error(e)})},a.editAd=function(){},a.props=e,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"listItem"},n.createElement("h4",{className:"listItemTitle"},this.props.adData.title),n.createElement("p",{className:"listItemPrice"},this.props.adData.price),n.createElement("p",{className:"listItemDescrition"},this.props.adData.description),n.createElement("span",{onClick:this.editAd},"Edit ad"),n.createElement("span",{onClick:this.deleteAd},"Delete ad"))}}]),t}(n.Component),F=(a(28),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={adsData:{}},a.cookie="",a.loadLatestAds=function(){fetch("/ads/load?owner="+a.cookie,{method:"GET"}).then(function(e){return e.json()}).then(function(e){a.setState({adsData:e.ads})}).catch(function(e){return console.error(e)})},a.cookie=p.getCookieValue("dollar"),a.loadLatestAds(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if("0"===this.cookie||""===this.cookie)return n.createElement("div",{className:"accountPage"},n.createElement("p",null,"Nothing here"));for(var e=Object.values(this.state.adsData),t=[],a=0;a<e.length;a++)t.push(n.createElement(k,{key:a,adData:e[a]}));return n.createElement("div",{className:"accountPage"},n.createElement("h2",null,"My Ads"),n.createElement(I,null),n.createElement("div",{className:"listItems"},t))}}]),t}(n.Component)),D=(a(47),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={notificationMessage:"",showNotification:!1},a.cookie="",a.postAd=function(e){e.preventDefault();var t=e.target,n=new FormData(t),i={},o=!0,c=!1,r=void 0;try{for(var s,l=n.keys()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;i[u]=n.get(u)}}catch(m){c=!0,r=m}finally{try{o||null==l.return||l.return()}finally{if(c)throw r}}fetch("/ad/post",{body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(function(e){return e.json()}).then(function(e){"undefined"!==typeof e.adPosted&&e.adPosted&&(t.reset(),a.showNotification(e.msg))}).catch(function(e){return console.error(e)})},a.showNotification=function(e){a.setState({notificationMessage:e,showNotification:!0})},a.hideNotification=function(){a.state.showNotification&&a.setState({notificationMessage:"",showNotification:!1})},a.cookie=p.getCookieValue("dollar"),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return"0"===this.cookie||""===this.cookie?n.createElement("div",{className:"accountPage"},n.createElement("p",null,"Nothing here")):n.createElement("div",{className:"postAdPage"},n.createElement("h2",null,"Post new ad here"),n.createElement(I,null),n.createElement("div",{className:this.state.showNotification?"postAdPageNotification postAdPageNotificationActive":"postAdPageNotification"},n.createElement("p",{className:"postAdPageNotificationText"},this.state.notificationMessage),n.createElement("span",{className:"postAdPageNotificationClose closeIC",onClick:this.hideNotification},"\xa0")),n.createElement("form",{className:"postAdForm",onSubmit:this.postAd},n.createElement("div",{className:"postAdFormLine"},n.createElement("div",{className:"postAdFormSubLine"},n.createElement("label",{className:"postAdFormLineLabel",htmlFor:"live"},"Live"),n.createElement("input",{type:"radio",defaultChecked:!0,name:"live",id:"live",value:"true",onFocus:this.hideNotification})),n.createElement("div",{className:"postAdFormSubLine"},n.createElement("label",{className:"postAdFormLineLabel",htmlFor:"no-live"},"Not live"),n.createElement("input",{type:"radio",name:"live",id:"no-live",value:"false",onFocus:this.hideNotification}))),n.createElement("div",{className:"postAdFormLine"},n.createElement("input",{className:"postAdFormLineField",type:"text",required:!0,name:"title",placeholder:"Ad title",onFocus:this.hideNotification})),n.createElement("div",{className:"postAdFormLine"},n.createElement("input",{className:"postAdFormLineField",type:"number",required:!0,name:"price",placeholder:"Price",onFocus:this.hideNotification})),n.createElement("div",{className:"postAdFormLine"},n.createElement("textarea",{className:"postAdFormLineField",required:!0,placeholder:"Description",rows:8,name:"description",onFocus:this.hideNotification})),n.createElement("div",{className:"postAdFormLine"},n.createElement("input",{className:"postAdFormLineSubmit",type:"stubmit",value:"Post ad"}))))}}]),t}(n.Component)),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isLoggedIn:0,userData:{email:"",id:"",location:"",name:"",username:""}},a.cookie="",a.requestUserData=function(){fetch("/account/getUser",{method:"GET"}).then(function(e){return e.json()}).then(function(e){"undefined"!==typeof e.loggedIn&&e.loggedIn?a.setState({isLoggedIn:1,userData:e}):a.setState({isLoggedIn:2})}).catch(function(e){return console.error(e)})},a.cookie=p.getCookieValue("dollar"),a.requestUserData(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return"0"===this.cookie||""===this.cookie?n.createElement("div",{className:"accountPage"},n.createElement("p",null,"Nothing here")):n.createElement("div",{className:"accountPage"},n.createElement("h2",null,"My Profile"),n.createElement(I,null),n.createElement("div",{className:"accountDetails"},n.createElement("h4",null,"Your account details"),n.createElement("h5",null,"Username:"),n.createElement("p",null,this.state.userData.username),n.createElement("h5",null,"Email:"),n.createElement("p",null,this.state.userData.email),n.createElement("h5",null,"Name:"),this.state.userData.name?n.createElement("p",null,this.state.userData.name):n.createElement("input",{type:"text",placeholder:"enter your name"}),n.createElement("h5",null,"Location:"),this.state.userData.location?n.createElement("p",null,this.state.userData.location):n.createElement("input",{type:"text",placeholder:"enter your location"})))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props={adData:{description:"",price:"",title:""}},a.props=e,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"listItem"},n.createElement("h4",{className:"listItemTitle"},this.props.adData.title),n.createElement("p",{className:"listItemPrice"},this.props.adData.price),n.createElement("p",{className:"listItemDescrition"},this.props.adData.description))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props={adsData:{}},a.props=e,a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){for(var e=Object.values(this.props.adsData),t=[],a=0;a<e.length;a++)t.push(n.createElement(R,{key:a,adData:e[a]}));return n.createElement("div",{className:"listItems"},t)}}]),t}(n.Component),A=(a(48),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={adsData:{}},a.loadLatestAds=function(){fetch("/ads/load",{method:"GET"}).then(function(e){return e.json()}).then(function(e){a.setState({adsData:e.ads})}).catch(function(e){return console.error(e)})},a.loadLatestAds(),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"homepageView"},n.createElement("h4",{className:"homepageViewTitle"},"Latest ads"),n.createElement(S,{adsData:this.state.adsData}))}}]),t}(n.Component)),P=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",null,n.createElement("div",null,"Shops"))}}]),t}(n.Component),x=(a(49),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement("div",{className:"mainBlock"},n.createElement(E.b,{exact:!0,path:"/",component:A}),n.createElement(E.b,{exact:!0,path:"/shops",component:P}),n.createElement(E.b,{exact:!0,path:"/account",component:w}),n.createElement(E.b,{exact:!0,path:"/account/post-ad",component:D}),n.createElement(E.b,{exact:!0,path:"/account/my-ads",component:F}),n.createElement(E.b,{exact:!0,path:"/account/profile",component:C}))}}]),t}(n.Component)),T=(a(50),a(51),a(52),a(53),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(m.a,null,n.createElement(N,null),n.createElement(x,null),n.createElement(d,null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(14),U=a(32),M=a(26),B={authenticated:!1},q=Object(_.c)({authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":return Object(M.a)({},e,{newState:t.payload});default:return e}}}),G=[U.a],W=Object(_.e)(q,{},Object(_.d)(_.a.apply(void 0,G),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.render(n.createElement(h.a,{store:W},n.createElement(T,null)),document.getElementById("site")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.ef1e8c56.chunk.js.map